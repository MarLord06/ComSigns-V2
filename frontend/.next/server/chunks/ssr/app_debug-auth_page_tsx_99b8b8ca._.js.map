{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/marloveper__/Documents/proyectos/ccc/ComSigns-DEV/ComSigns-V2/frontend/app/debug-auth/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { supabase } from '@/lib/supabase'\n\nexport default function AuthDebugPage() {\n  const [status, setStatus] = useState('Inicializando...')\n  const [logs, setLogs] = useState<string[]>([])\n  const [sessionInfo, setSessionInfo] = useState<any>(null)\n\n  const addLog = (message: string) => {\n    setLogs(prev => [...prev, `${new Date().toISOString()}: ${message}`])\n  }\n\n  const forceLogout = async () => {\n    addLog('üßπ Forzando logout y limpieza de sesi√≥n...')\n    await supabase.auth.signOut()\n    \n    // Limpiar storage adicional si es necesario\n    localStorage.clear()\n    sessionStorage.clear()\n    \n    addLog('‚úÖ Sesi√≥n limpiada, recargando p√°gina...')\n    window.location.reload()\n  }\n\n  useEffect(() => {\n    const testAuth = async () => {\n      try {\n        addLog('üöÄ Iniciando prueba de autenticaci√≥n')\n        \n        // Test 1: Variables de entorno\n        addLog(`üìã SUPABASE_URL: ${process.env.NEXT_PUBLIC_SUPABASE_URL ? 'OK' : 'MISSING'}`)\n        addLog(`üìã SUPABASE_ANON_KEY: ${process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY ? 'OK' : 'MISSING'}`)\n        \n        // Test 2: Cliente de Supabase\n        addLog('üîå Probando cliente de Supabase...')\n        const { data: { session }, error } = await supabase.auth.getSession()\n        \n        if (error) {\n          addLog(`‚ùå Error obteniendo sesi√≥n: ${error.message}`)\n          setStatus('Error de conexi√≥n')\n          return\n        }\n        \n        addLog(`‚úÖ Sesi√≥n obtenida: ${session ? 'Usuario autenticado' : 'Sin sesi√≥n activa'}`)\n        \n        if (session) {\n          setSessionInfo({\n            userId: session.user?.id,\n            email: session.user?.email,\n            createdAt: session.user?.created_at\n          })\n          addLog(`üë§ Usuario ID: ${session.user?.id}`)\n          addLog(`üìß Email: ${session.user?.email}`)\n        }\n        \n        // Test 3: Conexi√≥n a la base de datos\n        addLog('üóÑÔ∏è Probando conexi√≥n a base de datos...')\n        const { data, error: dbError } = await supabase\n          .from('user_profiles')\n          .select('id')\n          .limit(1)\n        \n        if (dbError) {\n          addLog(`‚ùå Error tabla user_profiles: ${dbError.message}`)\n          setStatus('Error de base de datos')\n          return\n        }\n        \n        addLog('‚úÖ Tabla user_profiles accesible')\n        \n        // Test 4: Probar tabla game_attempts\n        addLog('üéÆ Probando tabla game_attempts...')\n        const { data: gameData, error: gameError } = await supabase\n          .from('game_attempts')\n          .select('id')\n          .limit(1)\n        \n        if (gameError) {\n          addLog(`‚ùå Error tabla game_attempts: ${gameError.message}`)\n          setStatus('Error en tabla game_attempts')\n          return\n        }\n        \n        addLog('‚úÖ Tabla game_attempts accesible')\n        setStatus('‚úÖ Todo funcionando correctamente')\n        \n      } catch (error) {\n        addLog(`üí• Error inesperado: ${error}`)\n        setStatus('Error inesperado')\n      }\n    }\n\n    testAuth()\n  }, [])\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-8\">\n      <div className=\"max-w-4xl mx-auto\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-8\">üîç Debug de Autenticaci√≥n</h1>\n        \n        <div className=\"bg-white rounded-lg shadow p-6 mb-8\">\n          <h2 className=\"text-xl font-semibold mb-4\">Estado Actual</h2>\n          <div className={`text-lg font-medium mb-4 ${\n            status.includes('‚úÖ') ? 'text-green-600' : \n            status.includes('‚ùå') ? 'text-red-600' : \n            'text-yellow-600'\n          }`}>\n            {status}\n          </div>\n          \n          {sessionInfo && (\n            <div className=\"bg-red-50 border border-red-200 rounded p-4 mb-4\">\n              <h3 className=\"font-semibold text-red-800 mb-2\">‚ö†Ô∏è Sesi√≥n Fantasma Detectada</h3>\n              <p className=\"text-sm text-red-700 mb-3\">\n                Hay una sesi√≥n activa pero posiblemente el usuario fue eliminado de Supabase.\n              </p>\n              <button\n                onClick={forceLogout}\n                className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 text-sm\"\n              >\n                üßπ Limpiar Sesi√≥n y Recargar\n              </button>\n            </div>\n          )}\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <h2 className=\"text-xl font-semibold mb-4\">Logs de Prueba</h2>\n          <div className=\"space-y-2 font-mono text-sm\">\n            {logs.length === 0 ? (\n              <div className=\"text-gray-500\">Ejecutando pruebas...</div>\n            ) : (\n              logs.map((log, index) => (\n                <div key={index} className=\"text-gray-700\">{log}</div>\n              ))\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}