(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{2010:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n});var s=t(5155),i=t(2115),r=t(3168);function n(){let[e,a]=(0,i.useState)("Inicializando..."),[t,n]=(0,i.useState)([]),[o,d]=(0,i.useState)(null),c=e=>{n(a=>[...a,"".concat(new Date().toISOString(),": ").concat(e)])},l=async()=>{c("\uD83E\uDDF9 Forzando logout y limpieza de sesi\xf3n..."),await r.N.auth.signOut(),localStorage.clear(),sessionStorage.clear(),c("✅ Sesi\xf3n limpiada, recargando p\xe1gina..."),window.location.reload()};return(0,i.useEffect)(()=>{(async()=>{try{c("\uD83D\uDE80 Iniciando prueba de autenticaci\xf3n"),c("\uD83D\uDCCB SUPABASE_URL: ".concat("OK")),c("\uD83D\uDCCB SUPABASE_ANON_KEY: ".concat("OK")),c("\uD83D\uDD0C Probando cliente de Supabase...");let{data:{session:o},error:l}=await r.N.auth.getSession();if(l){c("❌ Error obteniendo sesi\xf3n: ".concat(l.message)),a("Error de conexi\xf3n");return}if(c("✅ Sesi\xf3n obtenida: ".concat(o?"Usuario autenticado":"Sin sesi\xf3n activa")),o){var e,t,s,i,n;d({userId:null===(e=o.user)||void 0===e?void 0:e.id,email:null===(t=o.user)||void 0===t?void 0:t.email,createdAt:null===(s=o.user)||void 0===s?void 0:s.created_at}),c("\uD83D\uDC64 Usuario ID: ".concat(null===(i=o.user)||void 0===i?void 0:i.id)),c("\uD83D\uDCE7 Email: ".concat(null===(n=o.user)||void 0===n?void 0:n.email))}c("\uD83D\uDDC4️ Probando conexi\xf3n a base de datos...");let{data:u,error:m}=await r.N.from("user_profiles").select("id").limit(1);if(m){c("❌ Error tabla user_profiles: ".concat(m.message)),a("Error de base de datos");return}c("✅ Tabla user_profiles accesible"),c("\uD83C\uDFAE Probando tabla game_attempts...");let{data:b,error:x}=await r.N.from("game_attempts").select("id").limit(1);if(x){c("❌ Error tabla game_attempts: ".concat(x.message)),a("Error en tabla game_attempts");return}c("✅ Tabla game_attempts accesible"),a("✅ Todo funcionando correctamente")}catch(e){c("\uD83D\uDCA5 Error inesperado: ".concat(e)),a("Error inesperado")}})()},[]),(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"\uD83D\uDD0D Debug de Autenticaci\xf3n"}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Estado Actual"}),(0,s.jsx)("div",{className:"text-lg font-medium mb-4 ".concat(e.includes("✅")?"text-green-600":e.includes("❌")?"text-red-600":"text-yellow-600"),children:e}),o&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-4 mb-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-red-800 mb-2",children:"⚠️ Sesi\xf3n Fantasma Detectada"}),(0,s.jsx)("p",{className:"text-sm text-red-700 mb-3",children:"Hay una sesi\xf3n activa pero posiblemente el usuario fue eliminado de Supabase."}),(0,s.jsx)("button",{onClick:l,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 text-sm",children:"\uD83E\uDDF9 Limpiar Sesi\xf3n y Recargar"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Logs de Prueba"}),(0,s.jsx)("div",{className:"space-y-2 font-mono text-sm",children:0===t.length?(0,s.jsx)("div",{className:"text-gray-500",children:"Ejecutando pruebas..."}):t.map((e,a)=>(0,s.jsx)("div",{className:"text-gray-700",children:e},a))})]})]})})}},3168:(e,a,t)=>{"use strict";t.d(a,{N:()=>n});var s=t(5647);let i="https://xqdlbbwavnmkewvjaget.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhxZGxiYndhdm5ta2V3dmphZ2V0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwOTUxNjksImV4cCI6MjA2ODY3MTE2OX0.MRfDvIbM8zOEwTj6muzZTzeNwWoQ-TfjzExjMIabLs4";if(!i)throw Error("Missing env.NEXT_PUBLIC_SUPABASE_URL");if(!r)throw Error("Missing env.NEXT_PUBLIC_SUPABASE_ANON_KEY");let n=(0,s.UU)(i,r,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},8404:(e,a,t)=>{Promise.resolve().then(t.bind(t,2010))}},e=>{var a=a=>e(e.s=a);e.O(0,[647,441,684,358],()=>a(8404)),_N_E=e.O()}]);